<?xml version="1.0" encoding="UTF-8"?>
<sc:ServiceDefinition xmlns:sc="http://www.platform.com/ego/2005/05/schema/sc" xmlns:ego="http://www.platform.com/ego/2005/05/schema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xsi:schemaLocation="http://www.platform.com/ego/2005/05/schema/sc ../sc.xsd http://www.platform.com/ego/2005/05/schema ../ego.xsd" ServiceName="WEBGUI">
  <sc:Version>1.2</sc:Version>
  <sc:Description>EGO: management console</sc:Description>
  <sc:MinInstances>1</sc:MinInstances>
  <sc:MaxInstances>1</sc:MaxInstances>
  <sc:Priority>100</sc:Priority>
  <sc:MaxInstancesPerSlot>1</sc:MaxInstancesPerSlot>
  <sc:NeedCredential>TRUE</sc:NeedCredential>
  <sc:ControlPolicy>
    <sc:StartType>AUTOMATIC</sc:StartType>
    <sc:MaxRestarts>10</sc:MaxRestarts>
    <sc:HostFailoverInterval>PT10S</sc:HostFailoverInterval>
    <sc:Dependency type="OnStart">REST</sc:Dependency>
  </sc:ControlPolicy>
  <sc:AllocationSpecification>
    <ego:ConsumerID>/ManagementServices/EGOManagementServices</ego:ConsumerID>
	<!--The ResourceType specifies a "compute element" identified by the URI used below-->
    <sc:ResourceSpecification ResourceType="http://www.platform.com/ego/2005/05/schema/ce">
      <ego:ResourceGroupName>ManagementHosts</ego:ResourceGroupName>
      <ego:ResourceRequirement>select(!NTIA64 &amp;&amp; !SOL64)</ego:ResourceRequirement>
    </sc:ResourceSpecification>
  </sc:AllocationSpecification>

  <sc:ActivityDescription>
    <ego:Attribute name="hostType" type="xsd:string">NTX86</ego:Attribute>
    <ego:ActivitySpecification>
      <ego:Command>"${EGO_TOP}/4.0/etc/wsm.exe"</ego:Command>
      <ego:ExecutionUser>egoadmin</ego:ExecutionUser>
      <!--ego:JobController>gracefulshutdown</ego:JobController>
      <ego:ControlWaitPeriod>PT30S</ego:ControlWaitPeriod-->
      <ego:EnvironmentVariable name="EGO_TOP">${EGO_TOP}</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="PATH">${EGO_TOP}\soam\7.3.2\win32-vc7\lib;${EGO_LIBDIR}</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="IS_ASC_GUI">false</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="EGO_MACHINE_TYPE">${EGO_MACHINE_TYPE}</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="SOAM_HOME">${EGO_TOP}\soam</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="LD_LIBRARY_PATH">..\soam\7.3.2\w2k3_x64-vc7-psdk\lib64;..\4.0\lib</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="WLP_USER_DIR">${EGO_TOP}\wlp\usr</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="WLP_OUTPUT_DIR">${EGO_TOP}</ego:EnvironmentVariable>
      <ego:WorkingDirectory>${EGO_TOP}\gui</ego:WorkingDirectory>
      <ego:Umask>0022</ego:Umask>
    </ego:ActivitySpecification>
  </sc:ActivityDescription>

  <sc:ActivityDescription>
    <ego:Attribute name="hostType" type="xsd:string">NTX64</ego:Attribute>
      <ego:ActivitySpecification>
      <ego:Command>"${EGO_TOP}/4.0/etc/wsm.exe"</ego:Command>
      <ego:ExecutionUser>egoadmin</ego:ExecutionUser>
      <!--ego:JobController>gracefulshutdown</ego:JobController>
      <ego:ControlWaitPeriod>PT30S</ego:ControlWaitPeriod-->
      <ego:EnvironmentVariable name="EGO_TOP">${EGO_TOP}</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="PATH">${EGO_TOP}\soam\7.3.2\w2k3_x64-vc7-psdk\lib64;${EGO_LIBDIR}</ego:EnvironmentVariable>      
      <ego:EnvironmentVariable name="IS_ASC_GUI">false</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="EGO_MACHINE_TYPE">${EGO_MACHINE_TYPE}</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="SOAM_HOME">${EGO_TOP}\soam</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="LD_LIBRARY_PATH">..\soam\7.3.2\w2k3_x64-vc7-psdk\lib64;..\4.0\lib</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="WLP_USER_DIR">${EGO_TOP}\wlp\usr</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="WLP_OUTPUT_DIR">${EGO_TOP}</ego:EnvironmentVariable>
      <ego:WorkingDirectory>${EGO_TOP}\gui</ego:WorkingDirectory>
      <ego:Umask>0022</ego:Umask>
    </ego:ActivitySpecification>
  </sc:ActivityDescription>

  <sc:ActivityDescription>
    <ego:Attribute name="hostType" type="xsd:string">SOLX8664</ego:Attribute>
    <ego:ActivitySpecification>
      <ego:Command>${EGO_TOP}/4.0/${EGO_MACHINE_TYPE}/etc/webserverstart.sh </ego:Command>
      <ego:ExecutionUser>egoadmin</ego:ExecutionUser>
      <ego:JobController>gracefulshutdown</ego:JobController>
      <ego:ControlWaitPeriod>PT30S</ego:ControlWaitPeriod>
      <ego:EnvironmentVariable name="EGO_TOP">${EGO_TOP}</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="EGO_MACHINE_TYPE">${EGO_MACHINE_TYPE}</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="GUI_CONFDIR">${EGO_CONFDIR}/../../gui/conf</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="GUI_LOGDIR">${EGO_TOP}/gui/logs</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="PERF_CONFDIR">${EGO_CONFDIR}/../../perf/conf</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="SOAM_LIBDIR">${SOAM_LIBDIR}</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="IS_ASC_GUI">false</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="LSF_LIBDIR">${LSF_LIBDIR}</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="LANG">${LANG}</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="LC_ALL">${LC_ALL}</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="LD_LIBRARY_PATH">../soam/7.3.2/${BINARY_TYPE}/lib64;../4.0/${BINARY_TYPE}/lib</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="WLP_USER_DIR">${EGO_TOP}/wlp/usr</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="WLP_OUTPUT_DIR">${EGO_TOP}</ego:EnvironmentVariable>
      <ego:WorkingDirectory>${EGO_TOP}/gui</ego:WorkingDirectory>
      <ego:Umask>0022</ego:Umask>
    </ego:ActivitySpecification>
  </sc:ActivityDescription>
  <sc:ActivityDescription>
    <ego:Attribute name="hostType" type="xsd:string">all</ego:Attribute>
    <ego:ActivitySpecification>
      <ego:Command>${EGO_TOP}/4.0/${EGO_MACHINE_TYPE}/etc/webserverstart.sh </ego:Command>
      <ego:ExecutionUser>egoadmin</ego:ExecutionUser>
      <ego:JobController>gracefulshutdown</ego:JobController>
      <ego:ControlWaitPeriod>PT30S</ego:ControlWaitPeriod>
      <ego:EnvironmentVariable name="EGO_TOP">${EGO_TOP}</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="EGO_MACHINE_TYPE">${EGO_MACHINE_TYPE}</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="GUI_CONFDIR">${EGO_CONFDIR}/../../gui/conf</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="GUI_LOGDIR">${EGO_TOP}/gui/logs</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="PERF_CONFDIR">${EGO_CONFDIR}/../../perf/conf</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="SOAM_LIBDIR">${SOAM_LIBDIR}</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="IS_ASC_GUI">false</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="LSF_LIBDIR">${LSF_LIBDIR}</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="LANG">${LANG}</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="LC_ALL">${LC_ALL}</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="LD_LIBRARY_PATH">../soam/7.3.2/${BINARY_TYPE}/lib64;../4.0/${BINARY_TYPE}/lib</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="WLP_USER_DIR">${EGO_TOP}/wlp/usr</ego:EnvironmentVariable>
      <ego:EnvironmentVariable name="WLP_OUTPUT_DIR">${EGO_TOP}</ego:EnvironmentVariable>
      <ego:WorkingDirectory>${EGO_TOP}/gui</ego:WorkingDirectory>
      <ego:Umask>0022</ego:Umask>
    </ego:ActivitySpecification>
  </sc:ActivityDescription>
</sc:ServiceDefinition>
