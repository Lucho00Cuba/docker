<?xml version="1.0" encoding="UTF-8"?>
<Report xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../report.xsd">
	<Name>Active Session or Task Statistics</Name>
	<DisplayName>report.displayname</DisplayName>
	<Summary>report.summary</Summary>
	<Description>report.description</Description>
	<Category>report.category</Category>
	<Version>1.2.2</Version>
	<Parameters>
		<Parameter Name="TIME" Type="TIMEPICK" Label="report.parameter.time.label">
			<Attributes>
				<Attribute Name="startTimeName" Value="StartTime"/>
				<Attribute Name="endTimeName" Value="EndTime"/>
				<Attribute Name="defaultMethod" Value="RELATIVE"/>
				<Attribute Name="timeValue" Value="1"/>
				<Attribute Name="timeUnit" Value="H"/>
				<Attribute Name="timePrecision" Value="MINUTE"/>
			</Attributes>
		</Parameter>
		<Parameter Name="ConditionName" Type="DROPDOWNLIST" DefaultValue="" Label="report.parameter.condition_name.label">
			<Attributes>
				<Attribute Name="label" Value="Host"/>
				<Attribute Name="size" Value="10"/>
				<Attribute Name="maxSize" Value="10"/>
				<Attribute Name="script"><![CDATA[
function displayLayer(whichLayer) {
	document.getElementById(whichLayer).style.display="block";
}
function hiddenLayer(whichLayer) {
	document.getElementById(whichLayer).style.display="none";
}
function func_select(id) {
	var selValue = document.getElementById(id).value;
	var opts = document.getElementById(id).options;
	var i = 0;
	for(i = 0 ; i < opts.length ; i++) {
		if( opts[i].value == selValue) {
			displayLayer("DIV_" + opts[i].value);
			dynamStats.setpos = i + 2;
		} else {
			hiddenLayer("DIV_" + opts[i].value);
		}
	}
}
				]]></Attribute>
				<Attribute Name="onChange" Value="javascript:func_select('ConditionName')"/>
			</Attributes>
			<ListValue>
				<Item Value="CONSUMER_NAME" Label="report.parameter.condition_name.consumer_name.label"/>
				<Item Value="APP_NAME" Label="report.parameter.condition_name.app_name.label"/>
				<Item Value="SUBMISSION_USER" Label="report.parameter.condition_name.submission_user.label"/>
			</ListValue>
		</Parameter>
		<Parameter Name="CONSUMER_NAME" Type="DROPDOWNLIST" DefaultValue="" Label="report.parameter.consumer_name.label">
			<Attributes>
				<Attribute Name="Hidden" Value="false"/>
			</Attributes>	
			<Query DBType="STANDARD">
				<SQL><![CDATA[SELECT /*+ INDEX_FFS(IDX_SESSION_ATT_01) */ DISTINCT CONSUMER_NAME FROM SESSION_ATTRIBUTES ORDER BY CONSUMER_NAME]]></SQL>
				<Field Type="Value" Column="CONSUMER_NAME"/>
				<Field Type="Label" Column="CONSUMER_NAME"/>
			</Query>
		</Parameter>
		<Parameter Name="APP_NAME" Type="DROPDOWNLIST" DefaultValue="" Label="report.parameter.app_name.label">
			<Attributes>
				<Attribute Name="Hidden" Value="true"/>
			</Attributes>	
			<Query DBType="STANDARD">
				<SQL><![CDATA[SELECT /*+ INDEX_FFS(IDX_SESSION_ATT_01) */ DISTINCT APP_NAME FROM SESSION_ATTRIBUTES ORDER BY APP_NAME]]></SQL>
				<Field Type="Value" Column="APP_NAME"/>
				<Field Type="Label" Column="APP_NAME"/>
			</Query>
		</Parameter>
		<Parameter Name="SUBMISSION_USER" Type="DROPDOWNLIST" DefaultValue="" Label="report.parameter.submission_user.label">
			<Attributes>
				<Attribute Name="Hidden" Value="true"/>
			</Attributes>	
			<Query DBType="STANDARD">
				<SQL><![CDATA[SELECT /*+ INDEX_FFS(IDX_SESSION_ATT_01) */ DISTINCT SUBMISSION_USER FROM SESSION_ATTRIBUTES ORDER BY SUBMISSION_USER]]></SQL>
				<Field Type="Value" Column="SUBMISSION_USER"/>
				<Field Type="Label" Column="SUBMISSION_USER"/>
			</Query>
		</Parameter>
		<Parameter Name="DATA_TYPE" Type="DROPDOWNLIST" DefaultValue="" Label="report.parameter.data_type.label">
			<ListValue>
				<Item Value="Session" Label="report.parameter.data_type.session.label"/>
				<Item Value="Task" Label="report.parameter.data_type.task.label"/>
			</ListValue>
		</Parameter>
		<Parameter Name="CLUSTER" Type="DROPDOWNLIST" DefaultValue="" Label="report.parameter.cluster.label">
			<Attributes>
				<Attribute Name="label" Value="Cluster"/>
			</Attributes>
			<Query DBType="STANDARD">
				<SQL><![CDATA[
					SELECT /*+ INDEX_FFS(IDX_SESSION_ATT_02) */ DISTINCT CLUSTER_NAME FROM SESSION_ATTRIBUTES ORDER BY CLUSTER_NAME
					]]></SQL>
				<Field Type="Value" Column="CLUSTER_NAME"/>
				<Field Type="Label" Column="CLUSTER_NAME"/>
			</Query>
		</Parameter>
	</Parameters>
	<Queries>
		<Query DBType="ORACLE" DATA_TYPE="Task" Name="Task">
			<SQL><![CDATA[
SELECT TIME_STAMP,SUM(NUM_TASK_PENDING) AS NUM_TASK,'Pending' AS STATE_TASK
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,SUM(NUM_TASK_RUNNING) AS NUM_TASK,'Running' AS STATE_TASK
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,SUM(NUM_TASK_YIELDED) AS NUM_TASK,'Yielded' AS STATE_TASK
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,SUM(NUM_TASK_RESUMING) AS NUM_TASK,'Resuming' AS STATE_TASK
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
  GROUP BY TIME_STAMP
  ORDER BY TIME_STAMP
			]]></SQL>
			<Parameter Name="CLUSTER" Type="STRING"/>
			<Parameter Name="StartTime" Type="TIMESTAMP"/>
			<Parameter Name="EndTime" Type="TIMESTAMP"/>
		</Query>
		<Query DBType="ORACLE" DATA_TYPE="Session" Name="Session">
			<SQL><![CDATA[
SELECT TIME_STAMP,COUNT(*) AS NUM_SESSION,'Open' AS STATE_SESSION
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
	AND SESSION_STATE= 'Open'
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,COUNT(*) AS NUM_SESSION,'Suspended' AS STATE_SESSION
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
	AND SESSION_STATE= 'Suspended'
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,COUNT(*) AS NUM_SESSION,'Yielded' AS STATE_SESSION
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
	AND SESSION_STATE= 'Yielded'
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,COUNT(*) AS NUM_SESSION,'Resuming' AS STATE_SESSION
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
	AND SESSION_STATE= 'Resuming'
  GROUP BY TIME_STAMP
  ORDER BY TIME_STAMP
			]]></SQL>
			<Parameter Name="CLUSTER" Type="STRING"/>
			<Parameter Name="StartTime" Type="TIMESTAMP"/>
			<Parameter Name="EndTime" Type="TIMESTAMP"/>
		</Query>
		<Query DBType="MYSQL" DATA_TYPE="Task" Name="Task">
			<SQL><![CDATA[
SELECT TIME_STAMP,SUM(NUM_TASK_PENDING) AS NUM_TASK,'Pending' AS STATE_TASK
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,SUM(NUM_TASK_RUNNING) AS NUM_TASK,'Running' AS STATE_TASK
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,SUM(NUM_TASK_YIELDED) AS NUM_TASK,'Yielded' AS STATE_TASK
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,SUM(NUM_TASK_RESUMING) AS NUM_TASK,'Resuming' AS STATE_TASK
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
  GROUP BY TIME_STAMP
  ORDER BY TIME_STAMP
			]]></SQL>
			<Parameter Name="CLUSTER" Type="STRING"/>
			<Parameter Name="StartTime" Type="TIMESTAMP"/>
			<Parameter Name="EndTime" Type="TIMESTAMP"/>
		</Query>
		<Query DBType="MYSQL" DATA_TYPE="Session" Name="Session">
			<SQL><![CDATA[
SELECT TIME_STAMP,COUNT(*) AS NUM_SESSION,'Open' AS STATE_SESSION
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
	AND SESSION_STATE= 'Open'
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,COUNT(*) AS NUM_SESSION,'Suspended' AS STATE_SESSION
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
	AND SESSION_STATE= 'Suspended'
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,COUNT(*) AS NUM_SESSION,'Yielded' AS STATE_SESSION
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
	AND SESSION_STATE= 'Yielded'
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,COUNT(*) AS NUM_SESSION,'Resuming' AS STATE_SESSION
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
	AND SESSION_STATE= 'Resuming'
  GROUP BY TIME_STAMP
  ORDER BY TIME_STAMP
			]]></SQL>
			<Parameter Name="CLUSTER" Type="STRING"/>
			<Parameter Name="StartTime" Type="TIMESTAMP"/>
			<Parameter Name="EndTime" Type="TIMESTAMP"/>
		</Query>
		<Query DBType="DERBY" DATA_TYPE="Task" Name="Task">
			<SQL><![CDATA[
SELECT TIME_STAMP,SUM(NUM_TASK_PENDING) AS NUM_TASK,CAST('Pending' AS VARCHAR(26)) AS STATE_TASK
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,SUM(NUM_TASK_RUNNING) AS NUM_TASK,CAST('Running' AS VARCHAR(26)) AS STATE_TASK
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,SUM(NUM_TASK_YIELDED) AS NUM_TASK,CAST('Yielded' AS VARCHAR(26)) AS STATE_TASK
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,SUM(NUM_TASK_RESUMING) AS NUM_TASK,CAST('Resuming' AS VARCHAR(26)) AS STATE_TASK
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
  GROUP BY TIME_STAMP
  ORDER BY TIME_STAMP
			]]></SQL>
			<Parameter Name="CLUSTER" Type="STRING"/>
			<Parameter Name="StartTime" Type="TIMESTAMP"/>
			<Parameter Name="EndTime" Type="TIMESTAMP"/>
		</Query>
		<Query DBType="DERBY" DATA_TYPE="Session" Name="Session">
			<SQL><![CDATA[
SELECT TIME_STAMP,COUNT(*) AS NUM_SESSION,CAST('Open' AS VARCHAR(26)) AS STATE_SESSION
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
	AND SESSION_STATE= 'Open'
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,COUNT(*) AS NUM_SESSION,CAST('Suspended' AS VARCHAR(26)) AS STATE_SESSION
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
	AND SESSION_STATE= 'Suspended'
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,COUNT(*) AS NUM_SESSION,CAST('Yielded' AS VARCHAR(26)) AS STATE_SESSION
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
	AND SESSION_STATE= 'Yielded'
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,COUNT(*) AS NUM_SESSION,CAST('Resuming' AS VARCHAR(26)) AS STATE_SESSION
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
	AND SESSION_STATE= 'Resuming'
  GROUP BY TIME_STAMP
  ORDER BY TIME_STAMP
			]]></SQL>
			<Parameter Name="CLUSTER" Type="STRING"/>
			<Parameter Name="StartTime" Type="TIMESTAMP"/>
			<Parameter Name="EndTime" Type="TIMESTAMP"/>
		</Query>
		<Query DBType="SQLSERVER" DATA_TYPE="Task" Name="Task">
			<SQL><![CDATA[
SELECT TIME_STAMP,SUM(NUM_TASK_PENDING) AS NUM_TASK,'Pending' AS STATE_TASK
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,SUM(NUM_TASK_RUNNING) AS NUM_TASK,'Running' AS STATE_TASK
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,SUM(NUM_TASK_YIELDED) AS NUM_TASK,'Yielded' AS STATE_TASK
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,SUM(NUM_TASK_RESUMING) AS NUM_TASK,'Resuming' AS STATE_TASK
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
  GROUP BY TIME_STAMP
  ORDER BY TIME_STAMP
			]]></SQL>
			<Parameter Name="CLUSTER" Type="STRING"/>
			<Parameter Name="StartTime" Type="TIMESTAMP"/>
			<Parameter Name="EndTime" Type="TIMESTAMP"/>
		</Query>
		<Query DBType="SQLSERVER" DATA_TYPE="Session" Name="Session">
			<SQL><![CDATA[
SELECT TIME_STAMP,COUNT(*) AS NUM_SESSION,'Open' AS STATE_SESSION
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
	AND SESSION_STATE= 'Open'
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,COUNT(*) AS NUM_SESSION,'Suspended' AS STATE_SESSION
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
	AND SESSION_STATE= 'Suspended'
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,COUNT(*) AS NUM_SESSION,'Yielded' AS STATE_SESSION
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
	AND SESSION_STATE= 'Yielded'
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,COUNT(*) AS NUM_SESSION,'Resuming' AS STATE_SESSION
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
	AND SESSION_STATE= 'Resuming'
  GROUP BY TIME_STAMP
  ORDER BY TIME_STAMP
			]]></SQL>
			<Parameter Name="CLUSTER" Type="STRING"/>
			<Parameter Name="StartTime" Type="TIMESTAMP"/>
			<Parameter Name="EndTime" Type="TIMESTAMP"/>
		</Query>
		<Query DBType="DB2" DATA_TYPE="Task" Name="Task">
			<SQL><![CDATA[
SELECT TIME_STAMP,SUM(NUM_TASK_PENDING) AS NUM_TASK,CAST('Pending' AS VARCHAR(26)) AS STATE_TASK
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,SUM(NUM_TASK_RUNNING) AS NUM_TASK,CAST('Running' AS VARCHAR(26)) AS STATE_TASK
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,SUM(NUM_TASK_YIELDED) AS NUM_TASK,CAST('Yielded' AS VARCHAR(26)) AS STATE_TASK
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,SUM(NUM_TASK_RESUMING) AS NUM_TASK,CAST('Resuming' AS VARCHAR(26)) AS STATE_TASK
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
  GROUP BY TIME_STAMP
  ORDER BY TIME_STAMP
			]]></SQL>
			<Parameter Name="CLUSTER" Type="STRING"/>
			<Parameter Name="StartTime" Type="TIMESTAMP"/>
			<Parameter Name="EndTime" Type="TIMESTAMP"/>
		</Query>
		<Query DBType="DB2" DATA_TYPE="Session" Name="Session">
			<SQL><![CDATA[
SELECT TIME_STAMP,COUNT(*) AS NUM_SESSION,CAST('Open' AS VARCHAR(26)) AS STATE_SESSION
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
	AND SESSION_STATE= 'Open'
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,COUNT(*) AS NUM_SESSION,CAST('Suspended' AS VARCHAR(26)) AS STATE_SESSION
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
	AND SESSION_STATE= 'Suspended'
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,COUNT(*) AS NUM_SESSION,CAST('Yielded' AS VARCHAR(26)) AS STATE_SESSION
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
	AND SESSION_STATE= 'Yielded'
  GROUP BY TIME_STAMP
UNION ALL
SELECT TIME_STAMP,COUNT(*) AS NUM_SESSION,CAST('Resuming' AS VARCHAR(26)) AS STATE_SESSION
  FROM SESSION_ATTRIBUTES
  WHERE %%%CONDITION_NAME%%% = %%%CONDITION_VALUE%%%
    AND CLUSTER_NAME IN (%%%CLUSTER%%%)
    AND (TIME_STAMP >= %%%StartTime%%% AND TIME_STAMP < %%%EndTime%%%)
	AND SESSION_STATE= 'Resuming'
  GROUP BY TIME_STAMP
  ORDER BY TIME_STAMP
			]]></SQL>
			<Parameter Name="CLUSTER" Type="STRING"/>
			<Parameter Name="StartTime" Type="TIMESTAMP"/>
			<Parameter Name="EndTime" Type="TIMESTAMP"/>
 		</Query>				
	</Queries>
	<!-- The Type refer the report type. e.g. LineChart, Table, ClusteredBarChart, StackedBarChart -->
	<Layouts>
		<Layout DATA_TYPE="Task">
			<Type>STACKED_BAR_CHART</Type>
			<DataSetName>Task</DataSetName>
			<Title>report.layout.task.title</Title>
			<Subtitles>
				<Subtitle Variables="%%%CLUSTER%%%">report.layout.task.subtitle1</Subtitle>
				<Subtitle Variables="%%%CONDITION_NAME_FOR_SUBTITLE%%%,%%%CONDITION_VALUE_FOR_SUBTITLE%%%">report.layout.task.subtitle2</Subtitle>
				<Subtitle Variables="%%%REAL_START_TIME%%%,%%%REAL_END_TIME%%%">report.layout.task.subtitle3</Subtitle>
			</Subtitles>
			<!-- The label will display in chart Time-->
			<X-Axis Label="report.layout.task.x-axis.label" Type="TIME" Period="5m" Start="%%%REAL_START_TIME%%%" End="%%%REAL_END_TIME%%%">
				<!-- The column map the name from sql statement. Type refer maybe Timestamp and Catetory(String), The Period attribute only for Timestamp type.-->
				<Column>TIME_STAMP</Column>
			</X-Axis>
			<Y-Axis Label="report.layout.task.y-axis.label" Format="report.layout.task.y-axis.format"/>
			<Series>
				<FromRows ValueColumn="NUM_TASK">
					<Column>STATE_TASK</Column>
				</FromRows>
			</Series>
		</Layout>
		<Layout DATA_TYPE="Session">
			<Type>STACKED_BAR_CHART</Type>
			<DataSetName>Session</DataSetName>
			<Title>report.layout.session.title</Title>
			<Subtitles>
				<Subtitle Variables="%%%CLUSTER%%%">report.layout.session.subtitle1</Subtitle>
				<Subtitle Variables="%%%REAL_START_TIME%%%,%%%REAL_END_TIME%%%">report.layout.session.subtitle2</Subtitle>
				<Subtitle Variables="%%%CONDITION_NAME_FOR_SUBTITLE%%%,%%%CONDITION_VALUE_FOR_SUBTITLE%%%">report.layout.session.subtitle3</Subtitle>
			</Subtitles>
			<!-- The label will display in chart Time-->
			<X-Axis Label="report.layout.session.x-axis.label" Type="TIME" Period="5m" Start="%%%REAL_START_TIME%%%" End="%%%REAL_END_TIME%%%">
				<!-- The column map the name from sql statement. Type refer maybe Timestamp and Catetory(String), The Period attribute only for Timestamp type.-->
				<Column>TIME_STAMP</Column>
			</X-Axis>
			<Y-Axis Label="report.layout.session.y-axis.label" Format="report.layout.session.y-axis.format"/>
			<Series>
				<FromRows ValueColumn="NUM_SESSION">
					<Column>STATE_SESSION</Column>
				</FromRows>
			</Series>
		</Layout>
	</Layouts>
		<DataExports>
		<DataExport Name="Task">
			<Column Name="TIME_STAMP" Label="report.data_exports.task.time_stamp.label" />
			<Column Name="NUM_TASK" Label="report.data_exports.task.num_task.label" />
			<Column Name="STATE_TASK" Label="report.data_exports.task.state_task.label" />
		</DataExport>
		<DataExport Name="Session">
			<Column Name="TIME_STAMP" Label="report.data_exports.session.time_stamp.label" />
			<Column Name="NUM_SESSION" Label="report.data_exports.session.num_session.label" />
			<Column Name="STATE_SESSION" Label="report.data_exports.session.state_session.label" />
		</DataExport>
	</DataExports>
	<Variables>
		<Variable Name="CLUSTER" Target="CLUSTER" Source="REQUEST" />
		<Variable Name="StartTime" Target="StartTime" Source="REQUEST" />
		<Variable Name="EndTime" Target="EndTime" Source="REQUEST" />
		<Variable Name="CONDITION_NAME" Target="ConditionName" Source="REQUEST" />
		<Variable Name="CONDITION_VALUE" Target="ConditionValue" Source="CONDITION" Function="TO_COMMA_DELIMITED_QUOTED_STRING"/>
		<Variable Name="CONDITION_NAME_FOR_SUBTITLE" Target="ConditionName" Source="MAP" />
		<Variable Name="CONDITION_VALUE_FOR_SUBTITLE" Target="ConditionValue" Source="CONDITION" Function="TO_COMMA_DELIMITED_STRING"/>
		<Variable Name="DATA_TYPE" Target="DATA_TYPE" Source="REQUEST"/>
		<Variable Name="REAL_START_TIME" Target="REAL_START_TIME" Source="REAL_TIME_RANGE">
			<Format Plug-in="com.platform.perf.report.config.var.format.DateTimeFormat" Pattern="yyyy-MM-dd HH:mm"/>
		</Variable>
		<Variable Name="REAL_END_TIME" Target="REAL_END_TIME" Source="REAL_TIME_RANGE">
			<Format Plug-in="com.platform.perf.report.config.var.format.DateTimeFormat" Pattern="yyyy-MM-dd HH:mm"/>
		</Variable>
	</Variables>
	<Sources>
		<Source Name="REQUEST" Plug-in="com.platform.perf.report.config.var.source.RequestVariableSource"/>
		<Source Name="REAL_TIME_RANGE" Plug-in="com.platform.perf.report.config.var.source.RealTimeRangeSource">
			<Parameter Name="START_TIME">%%%StartTime%%%</Parameter>
			<Parameter Name="END_TIME">%%%EndTime%%%</Parameter>
		</Source>
		<Source Name="CONDITION" Plug-in="com.platform.perf.report.config.var.source.ConditionVariableSource" >
			<Parameter Name="CONDITION_NAME">%%%CONDITION_NAME%%%</Parameter>
		</Source>
		<Source Name="MAP" Plug-in="com.platform.perf.report.config.var.source.MapVariableSource" >
			<Parameter Name="VARIABLE_NAME">%%%CONDITION_NAME%%%</Parameter>
			<Parameter Name="MAP">
				<Map>
					<Entry>
						<Key>CONSUMER_NAME</Key>
						<Value>CONSUMER</Value>
					</Entry>
					<Entry>
						<Key>APP_NAME</Key>
						<Value>APPLICATION</Value>
					</Entry>
					<Entry>
						<Key>SUBMISSION_USER</Key>
						<Value>USER</Value>
					</Entry>
				</Map>
			</Parameter>
		</Source>
	</Sources>
</Report>
