<?xml version="1.0" encoding="UTF-8"?>
<TableMaintenance xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="table_maintenance.xsd">
	<Descriptions>
		<Name>License Accounting Rate Table Maintenance</Name>
		<Summary>许可证费率表的维护, 包括插入数据, 删除数据, 修改数据</Summary>
		<Folder>TableMaintenance</Folder>
		<Discription>许可证费率表的维护</Discription>
		<DisplayName>许可证费率表的维护</DisplayName>
		<Category>计费表的维护</Category>
	</Descriptions>
	<Insert>
		<Parameters>
			<Parameter Name="LIC_FEATURE_NAME" Type="DROPDOWNLIST" Label="许可证">
				<VarValue Name="${LIC_FEATURE_MAP}">
					<Field Type="Value" Column="LIC_FEATURE_CODE" />
					<Field Type="Label" Column="LIC_FEATURE_NAME" />
				</VarValue>
			</Parameter>
			<Parameter Name="LIC_VENDOR_NAME" Type="DROPDOWNLIST" Label="许可证生产商">
				<VarValue Name="${LIC_VENDOR_MAP}">
					<Field Type="Value" Column="LIC_VENDOR_CODE" />
					<Field Type="Label" Column="LIC_VENDOR_NAME" />
				</VarValue>
			</Parameter>
			<Parameter Name="BUSINESS_HOUR_CODE" Type="DROPDOWNLIST" Label="商业时间">
				<ListValue>
     					<Item Value="1" Label="工作日" />
     					<Item Value="0" Label="非工作日" />
    				</ListValue>
			</Parameter>
			<Parameter Name="LIC_RATE" Type="TEXT" Label="许可证费率(/小时)" />
		</Parameters>
		<Queries>
			<Query DBType="ORACLE">
				<SQL>
				<![CDATA[
INSERT INTO LICENSE_RATE(LIC_VENDOR_NAME, LIC_FEATURE_NAME, BUSINESS_HOUR_CODE, LIC_RATE) 
       VALUES('${LIC_VENDOR_NAME}', '${LIC_FEATURE_NAME}', ${BUSINESS_HOUR_CODE}, ${LIC_RATE})
 ]]>
				</SQL>
			</Query>
		</Queries>
	</Insert>
	<Delete>
		<Parameters>
		</Parameters>
		<Queries>
			<Query DBType="ORACLE">
				<SQL>
				<![CDATA[
DELETE LICENSE_RATE 
WHERE ROWID='${ROW_ID}'
 ]]>
				</SQL>
			</Query>
		</Queries>
	</Delete>
	<Update>
		<Parameters>
			<Parameter Name="LIC_FEATURE_NAME" Type="DROPDOWNLIST" Label="许可证功能">
				<VarValue Name="${LIC_FEATURE_MAP}">
					<Field Type="Value" Column="LIC_FEATURE_CODE" />
					<Field Type="Label" Column="LIC_FEATURE_NAME" />
				</VarValue>
			</Parameter>
			<Parameter Name="LIC_VENDOR_NAME" Type="DROPDOWNLIST" Label="许可证生产商">
				<VarValue Name="${LIC_VENDOR_MAP}">
					<Field Type="Value" Column="LIC_VENDOR_CODE" />
					<Field Type="Label" Column="LIC_VENDOR_NAME" />
				</VarValue>
			</Parameter>
			<Parameter Name="BUSINESS_HOUR_CODE" Type="DROPDOWNLIST" Label="商业时间">
				<ListValue>
     					<Item Value="1" Label="工作日" />
     					<Item Value="0" Label="非工作日" />
    				</ListValue>
			</Parameter>
			<Parameter Name="LIC_RATE" Type="TEXT" Label="许可证费率(/小时)" />
			
		</Parameters>
		<Queries>
			<Query DBType="ORACLE">
				<SQL>
				<![CDATA[
UPDATE LICENSE_RATE 
SET 
  LIC_RATE = ${LIC_RATE}, 
  LIC_FEATURE_NAME = '${LIC_FEATURE_NAME}',
  LIC_VENDOR_NAME = '${LIC_VENDOR_NAME}',
  BUSINESS_HOUR_CODE = ${BUSINESS_HOUR_CODE}
WHERE ROWID='${ROW_ID}'
 ]]>
				</SQL>
			</Query>
		</Queries>
	</Update>

	<Select>
		<Parameters>
			<Parameter Name="LIC_FEATURE_NAME" Type="DROPDOWNLIST" Label="许可证功能">
				<VarValue Name="${LIC_FEATURE_MAP}">
					<Field Type="Value" Column="LIC_FEATURE_CODE" />
					<Field Type="Label" Column="LIC_FEATURE_NAME" />
				</VarValue>
			</Parameter>
			<Parameter Name="LIC_VENDOR_NAME" Type="DROPDOWNLIST" Label="许可证生产商">
				<VarValue Name="${LIC_VENDOR_MAP}">
					<Field Type="Value" Column="LIC_VENDOR_CODE" />
					<Field Type="Label" Column="LIC_VENDOR_NAME" />
				</VarValue>
			</Parameter>
			<Parameter Name="BUSINESS_HOUR_CODE" Type="DROPDOWNLIST" Label="商业时间">
				<ListValue>
     					<Item Value="1" Label="工作日" />
     					<Item Value="0" Label="非工作日" />
    				</ListValue>
			</Parameter>
			<Parameter Name="LIC_RATE" Type="TEXT" Label="许可证费率(/小时)" />
		</Parameters>
		<Queries>
			<Query DBType="ORACLE">
				<SQL>
					<![CDATA[
SELECT ROWIDTOCHAR(LR.ROWID) AS ROW_ID, LR.*
FROM  LICENSE_RATE LR
 ]]>
				</SQL>
			</Query>
		</Queries>
		<Outputs>
			<Column Name="LIC_VENDOR_NAME" Label="许可证生产商" Type="INT" Display="YES" ContentStyle="NORMAL" HearderStyle="BOLD" />
			<Column Name="LIC_FEATURE_NAME" Label="许可证" Type="INT" Display="YES" ContentStyle="NORMAL" HearderStyle="BOLD" />
			<Column Name="BUSINESS_HOUR_CODE" Label="商业时间" Type="INT" Display="YES" ContentStyle="NORMAL" HearderStyle="BOLD" />
			<Column Name="LIC_RATE" Label="许可证费率(/小时)" Type="INT" Display="YES" ContentStyle="NORMAL" HearderStyle="BOLD" />
			<Column Name="ROW_ID" Label="行号" Type="STRING" Display="NO" />
		</Outputs>
	</Select>

	<Variables>		
		<Variable Name="LIC_VENDOR_NAME" Target="LIC_VENDOR_NAME" Source="REQUEST" />
		<Variable Name="LIC_FEATURE_NAME" Target="LIC_FEATURE_NAME" Source="REQUEST" />
		<Variable Name="BUSINESS_HOUR_CODE" Target="BUSINESS_HOUR_CODE" Source="REQUEST" />
		<Variable Name="LIC_RATE" Target="LIC_RATE" Source="REQUEST" />	
			
		<Variable Name="ROW_ID" Target="ROW_ID" Source="REQUEST" />
		
		<Variable Name="LIC_FEATURE_MAP" Target="" Source="LIC_FEATURE_SOURCE" />
		<Variable Name="LIC_VENDOR_MAP" Target="" Source="LIC_VENDOR_SOURCE" />
		
	</Variables>
	<Sources>
		<Source Name="REQUEST" Plug-in="com.platform.perf.report.config.var.source.RequestVariableSource" />
		<Source Name="LIC_FEATURE_SOURCE" Plug-in="com.platform.perf.report.config.var.source.SQLVaraibleSource">
			<Parameter Name="QUERIES">
				<Queries>
					<Query DBType="STANDARD">
						<SQL>
							<![CDATA[
							SELECT DISTINCT LIC_FEATURE_NAME AS LIC_FEATURE_CODE, LIC_FEATURE_NAME FROM LICENSE_ACCOUNTING
						]]>
						</SQL>
					</Query>
				</Queries>
			</Parameter>
		</Source>
		<Source Name="LIC_VENDOR_SOURCE" Plug-in="com.platform.perf.report.config.var.source.SQLVaraibleSource">
			<Parameter Name="QUERIES">
				<Queries>
					<Query DBType="STANDARD">
						<SQL>
							<![CDATA[
							SELECT DISTINCT LIC_VENDOR_NAME AS LIC_VENDOR_CODE, LIC_VENDOR_NAME FROM LICENSE_ACCOUNTING
						]]>
						</SQL>
					</Query>
				</Queries>
			</Parameter>
		</Source>
		
	</Sources>
</TableMaintenance>
